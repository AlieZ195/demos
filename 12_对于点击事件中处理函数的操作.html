<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<button>点击获取数据</button>
	<p></p>
	<script type="text/javascript">
		var btn = document.querySelector("button");
		var p = document.querySelector("p");
		btn.addEventListener("click",function(){
			// 在创建之前，先去根据id找到是否含有这个属性值的script，如果有，就把这个找到script删了，再动态创建；如果没有，那就动态创建
			var script = document.querySelector("#jp");
			if(script != null){
				document.body.removeChild(script);
			}
			// 1. 动态创建一个script标签
			script = document.createElement("script");
			// 1.1 为这个动态创建好的 script 元素添加一个 id 属性
			script.setAttribute("id","jp");
			var methodName = "jquery_" + (Math.random()+"").substr(2);
			// 有了这个函数名之后，再来进行函数的动态创建
			window[methodName] = function(msg){
				p.innerHTML = msg;
			}
			console.log("methodName = " + methodName);
			// 2. 为这个script元素设置 src 属性
			script.src = "./12.php?cb="+methodName;
			// 3. 将 script 标签添加到页面上
			document.body.appendChild(script);
		});
	</script>
</body>
</html>
